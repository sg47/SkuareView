<HTML>
<HEAD>
<TITLE> Kakadu Hyper-Doc (jpx_roi) </TITLE>
<STYLE TYPE="text/css">
<!--
.indented-text { padding-left: 20pt; }
-->
</STYLE>
</HEAD>
<BODY TEXT="#000000" LINK="#0000ff" BGCOLOR="#FFF491">
<P ALIGN="RIGHT">|<A HREF="#SynopsiS"> synopsis </A>||<A HREF="#FuncS"> functions </A>||<A HREF="#VarS"> variables </A>|</P>
<H1><A NAME="ToP">jpx_roi [struct]</A></H1>
<DIR><DIR><H3><U>Java:</U> class Jpx_roi</H3></DIR></DIR>

<P>[Declared in <A HREF="++++apps+c$essed_io+jpx+h.html">"../apps/compressed_io/jpx.h"</A>]</P><P ALIGN="CENTER"><HR></P><H2><A NAME="SynopsiS">Synopsis</A></H2>
<DIV CLASS="indented-text">
<P>
This structure manages a single region of interest,
as it appears within a JPX ROI Descriptions (
<B>roid</B>) box. It helps keep information about the image region
together with additional attributes of the region.
</P><P>
 For backward compatibility, direct access to the structure's
members is still permitted. However, you are strongly
encouraged to use the 
<A HREF="jpx_roi__init_rectangle.html">init_rectangle</A>, 
<A HREF="jpx_roi__init_ellipse__1.html">init_ellipse</A> or 
<B>init_quadtrilateral</B> function, along with the 
<A HREF="jpx_roi__get_rectangle.html">get_rectangle</A>, 
<A HREF="jpx_roi__get_ellipse__1.html">get_ellipse</A> and 
<A HREF="jpx_roi__get$adrilateral.html">get_quadrilateral</A> functions, to initialize the and retrieve attributes
of a region of interest.
</P><P>
 The function also provides many useful functions to
query and manipulate geometric properties of regions.
</P>
</DIV>

<P ALIGN="CENTER"><HR></P><H2><A NAME="FuncS">Public Functions</A></H2><DIV CLASS="indented-text">
<P><A HREF="jpx_roi__jpx_roi.html">jpx_roi</A> {<U>Java:</U> Jpx_roi}
</P>
<P><A HREF="jpx_roi__init_rectangle.html">init_rectangle</A> {<U>Java:</U> Init_rectangle}
</P>
<P><A HREF="jpx_roi__ini$adrilateral.html">init_quadrilateral</A> {<U>Java:</U> Init_quadrilateral}
</P>
<P><A HREF="jpx_roi__init_ellipse__1.html">init_ellipse</A> <EM>(2 forms)</EM> {<U>Java:</U> Init_ellipse}
</P>
<P><A HREF="jpx_roi__clip_region.html">clip_region</A> {<U>Java:</U> Clip_region}
</P>
<P><A HREF="jpx_roi__fix$nsistencies.html">fix_inconsistencies</A> {<U>Java:</U> Fix_inconsistencies}
</P>
<P><A HREF="jpx_roi__is_simple.html">is_simple</A> {<U>Java:</U> Is_simple}
</P>
<P><A HREF="jpx_roi__get$unding_rect.html">get_bounding_rect</A> {<U>Java:</U> Get_bounding_rect}
</P>
<P><A HREF="jpx_roi__get_rectangle.html">get_rectangle</A> {<U>Java:</U> Get_rectangle}
</P>
<P><A HREF="jpx_roi__get$adrilateral.html">get_quadrilateral</A> {<U>Java:</U> Get_quadrilateral}
</P>
<P><A HREF="jpx_roi__get_ellipse__1.html">get_ellipse</A> <EM>(2 forms)</EM> {<U>Java:</U> Get_ellipse}
</P>
<P><A HREF="jpx_roi__equals.html">equals</A> {<U>Java:</U> Equals}
</P>
<P><A HREF="jpx_roi__operator==.html">operator==</A></P>
<P><A HREF="jpx_roi__operator!=.html">operator!=</A></P>
<P><A HREF="jpx_roi__check_geometry.html">check_geometry</A> {<U>Java:</U> Check_geometry}
</P>
<P><A HREF="jpx_roi__che$ntersection.html">check_edge_intersection</A> {<U>Java:</U> Check_edge_intersection}
</P>
<P><A HREF="jpx_roi__measure_span.html">measure_span</A> {<U>Java:</U> Measure_span}
</P>
<P><A HREF="jpx_roi__measure_area.html">measure_area</A> {<U>Java:</U> Measure_area}
</P>
<P><A HREF="jpx_roi__contains.html">contains</A> {<U>Java:</U> Contains}
</P>
<P><A HREF="jpx_roi__fin$_projection.html">find_boundary_projection</A> {<U>Java:</U> Find_boundary_projection}
</P>
</DIV>
<H2><A NAME="VarS">Public Variables</A></H2><DIV CLASS="indented-text">
<H4><A NAME="region">region</A> [<A HREF ="kdu_dims.html">kdu_dims</A>]</H4><DIV CLASS="indented-text">
<P>
For simple rectangular regions (i.e., when 
<A HREF="jpx_roi.html#is_elliptical">is_elliptical</A> is false and the 
<A HREF="globals.html#JPX_QUADRILATERAL_ROI">JPX_QUADRILATERAL_ROI</A> flag is not present in 
<A HREF="jpx_roi.html#flags">flags</A>), this member holds the actual region of interest.
Otherwise, it hold the tightest bounding box for the
quadrilateral which is described by the 
<A HREF="jpx_roi.html#vertices">vertices</A> array. Note that 
<A HREF="kdu_dims.html#size">region.size</A> identifies the number of rows and columns of samples
which are in the bounding box, so column 
<B>region.pos.x</B> lies inside the region's bounding box, whereas 
<B>region.pos.x</B>+
<B>region.size.x</B> lies just outside &mdash; same for rows 
<B>region.pos.y</B> and 
<B>region.pos.y</B>+ 
<B>region.size.y</B>.
</P><P>
 For elliptical regions, this member again identifies
the tightest integer-aligned bounding box for the ellipse,
which necessarily has odd dimensions, since the centre
of the ellipse must have integer coordinates. The half-width
Wo and half-height Ho of the ellipse are important
geometric properties, defined to be Wo = (
<B>region.size.x</B>-1)/2 and Ho = (
<B>region.size.y</B>-1)/2. See 
<A HREF="jpx_roi__init_ellipse__1.html">init_ellipse</A> for more on how these quantities are interpreted.
</P><P>
 Note that regions are defined only for code-streams,
not any other image entities which may be found within
a JPX file such as compositing layers.
</P><P>
 Note also that regions are expressed relative to the
upper left hand corner of the image as it appears on
the relevant code-stream's high resolution grid &mdash;
this may be different from the origin of the code-stream's
coordinate canvas.
</P>
</DIV>
<H4><A NAME="is_elliptical">is_elliptical</A> [<B>bool</B>]</H4><DIV CLASS="indented-text">
<P>
If true, the 
<A HREF="jpx_roi.html#region">region</A> member identifes the bounding box of an elliptical
region. The centre of the ellipse is always given by
<A HREF="kdu_dims.html#pos">region.pos</A> + 
<A HREF="kdu_dims.html#size">region.size</A> / 2, where "/ 2"means divide each of the coordinates
by 2 and round downwards. The ellipse is defined by
the half-width Wo=
<B>region.size.x</B>&gt;&gt;1 and half-height Ho=
<B>region.size.y</B>&gt;&gt;1, together with the 
<A HREF="jpx_roi.html#elliptical_skew">elliptical_skew</A> value. For cardinally aligned ellipses, 
<A HREF="jpx_roi.html#elliptical_skew">elliptical_skew</A> is (0,0) and the ellipse is defined by the set of
points (x,y) such that (x-Cx)^2/Wo^2 + (y-Cy)^2/Ho^2
&lt;= 1, where (Cx,Cy) is the centre location.
</P><P>
 For oriented ellipses, Ho and Wo are the half-height
and half-width of the oriented ellipse's bounding box
and Cx+
<A HREF="kdu_coords.html#x">elliptical_skew.x</A> identifies the horizontal location of its intercept
with the top-most edge of this bounding box, while
Cy-
<A HREF="kdu_coords.html#y">elliptical_skew.y</A> identifies the vertical location of its intercept
with the left-most edge of this bounding box. See 
<A HREF="jpx_roi__init_ellipse__1.html">init_ellipse</A> for more on the interpretation of these quantities.
</P>
</DIV>
<H4><A NAME="is_encoded">is_encoded</A> [<B>bool</B>]</H4><DIV CLASS="indented-text">
<P>
If true, the region described here has actually been
encoded as a prioritized ROI within the code-streams
with which it is associated. JPEG2000 Part 1 code-streams
may encode ROI's only using the MAXSHIFT method, also
known as the implicit method. JPEG2000 Part 2 code-streams
may use explicit ROI coding. If this member is false,
the ROI is a semantic entity, described only at the
level of the file format.
</P>
</DIV>
<H4><A NAME="coding_priority">coding_priority</A> [<B>kdu_byte</B>]</H4><DIV CLASS="indented-text">
<P>
Indicates the coding priority for use in transcoding
images which contain code-stream ROI's &mdash; i.e.,
ROI's for which 
<A HREF="jpx_roi.html#is_encoded">is_encoded</A> is true.
</P>
</DIV>
<H4><A NAME="flags">flags</A> [<B>kdu_byte</B>]</H4><DIV CLASS="indented-text">
<P>
Currently, the only flag defined is 
<A HREF="globals.html#JPX_QUADRILATERAL_ROI">JPX_QUADRILATERAL_ROI</A>. If this flag is present, 
<A HREF="jpx_roi.html#is_elliptical">is_elliptical</A> must be false and 
<A HREF="jpx_roi.html#region">region</A> must hold the bounding box (must be tight) of the
quadrilateral whose vertices are given by the 
<A HREF="jpx_roi.html#vertices">vertices</A> array. The 
<A HREF="jpx_roi.html#vertices">vertices</A> array may be ignored if the 
<A HREF="globals.html#JPX_QUADRILATERAL_ROI">JPX_QUADRILATERAL_ROI</A> flag is missing, but it is good practice to make the
<A HREF="jpx_roi.html#vertices">vertices</A> agree with the four corners of rectangular regions
of interest even when a general quadrilateral is not
called for.
</P><P>
 To this end, you are recommended to use the 
<A HREF="jpx_roi__ini$adrilateral.html">init_quadrilateral</A> function to initialize regions of interest &mdash;
that function automatically determines whether a supplied
quadrilateral can be represented as a simple rectangle.
</P>
</DIV>
<H4><A NAME="elliptical_skew">elliptical_skew</A> [<A HREF ="kdu_coords.html">kdu_coords</A>]</H4><DIV CLASS="indented-text">
<P>
This member is explained at length in connection with
the 
<A HREF="jpx_roi__init_ellipse__1.html">init_ellipse</A> function. See also 
<A HREF="jpx_roi.html#is_elliptical">is_elliptical</A>.
</P>
</DIV>
<H4><A NAME="vertices">vertices[]</A> [<A HREF ="kdu_coords.html">kdu_coords</A>]</H4><DIV CLASS="indented-text">
<P>
This member is used for describing arbitrary quadrilateral
regions, via their four vertices. The values have no
meaning for elliptical regions of interest and might
not be reliable for simple rectangular regions of interest
(i.e., when 
<A HREF="globals.html#JPX_QUADRILATERAL_ROI">JPX_QUADRILATERAL_ROI</A> is missing). However, the 
<B>get_vertices</B> function will synthesize vertices for non-quadrilateral
representations.
</P><P>
 The vertices of the quadrilateral appear in clockwise
order, starting with the top-most vertex (i.e., the
one for which 
<A HREF="kdu_coords.html#y">kdu_coords::y</A> is smallest). The representation is not necessarily
unique because there might be multiple top-most vertices,
or the vertices could all be co-linear so that clockwise
and anti-clockwise orderings are indistinguishable.
These are not illegal conditions.
</P><P>
 Note that the edges of the quadrilateral are formed
by the line segments joining entry 0 to entry 1, entry
1 to entry 2, entry 2 to entry 3 and entry 3 back to
entry 0 in the 
<A HREF="jpx_roi.html#vertices">vertices</A> array. These line segments MAY NOT CROSS each other.
</P>
</DIV>
</DIV>
<P ALIGN="CENTER"><HR></P>
<P ALIGN="RIGHT">|<A HREF="#ToP"> top </A>||<A HREF="#SynopsiS"> synopsis </A>||<A HREF="#FuncS"> functions </A>||<A HREF="#VarS"> variables </A>|</P>
</BODY>
</HTML>
