<HTML>
<HEAD>
<TITLE> Kakadu Hyper-Doc (jpx_metanode::add_numlist) </TITLE>
<STYLE TYPE="text/css">
<!--
.indented-text { padding-left: 20pt; }
.function-text { padding-left: 80pt;
                 text-indent: -60pt; }
-->
</STYLE>
</HEAD>
<BODY TEXT="#000000" LINK="#0000ff" BGCOLOR="#B4DCB4">
<P ALIGN="RIGHT">|<A HREF="#SynopsiS"> synopsis </A>||<A HREF="#ReturnS"> return value </A>||<A HREF="#ArgS"> arguments </A>||<A HREF="jpx$anode__cha$ge_parent.html"> prev </A>||<A HREF="jpx$anode__add_regions.html"> next </A>|</P>
<H1><A NAME="ToP">jpx_metanode::add_numlist</A></H1>
<DIR><DIR><H3><EM><U>Java:</U> Jpx_metanode.Add_numlist</EM></H3></DIR></DIR>
<P CLASS="function-text"><A HREF ="jpx$anode.html">jpx_metanode</A> add_numlist(
<B>int</B>&nbsp;num_codestreams,
const&nbsp;<B>int</B>&nbsp;*&nbsp;codestream_indices,
<B>int</B>&nbsp;num_compositing_layers,
const&nbsp;<B>int</B>&nbsp;*&nbsp;layer_indices,
<B>bool</B>&nbsp;applies_to_rendered_result,
<B>int</B>&nbsp;container_id=-1)</P>
<DIR><DIR><P CLASS="function-text"><EM><U>Java:</U> public native Jpx_metanode Add_numlist(
int&nbsp;num_codestreams,
int[]&nbsp;codestream_indices,
int&nbsp;num_compositing_layers,
int[]&nbsp;layer_indices,
boolean&nbsp;applies_to_rendered_result,
int&nbsp;container_id)</EM></P></DIR></DIR>
<P>[Declared in <A HREF="++++apps+c$essed_io+jpx+h.html">"../apps/compressed_io/jpx.h"</A>]</P><P><A HREF="jpx$anode.html">Go to class description.</A></P>

<P ALIGN="CENTER"><HR></P><H2><A NAME="SynopsiS">Synopsis</A></H2>
<DIV CLASS="indented-text">
<P>
Use this function to add a descendant to the present
node, assigning this descendant to represent a number
list box. If this node is assigned its own descendants,
it will be represented by an association box, whose
first sub-box is the number list box; in this, the
most useful case, the node's descendants will all be
associate with the image entities identified via the
function's arguments. If no descendants are added to
the new node, it will be represented as an isolated
number list box, all by itself.
</P><P>
 From KDU-7.2, it is possible to embed number lists
within JPX containers (Compositing Layer Extensions
boxes). As explained with 
<A HREF="jpx$anode__get$list_info.html">get_numlist_info</A>, this affects the interpretation of the codestream
and compositing layer indices that are identified by
the number list. In particular, if a number list is
embedded in a JPX container, the codestreams and compositing
layers to which the number list refers include not
only those that are supplied via the 
<A HREF="jpx$anode__add_numlist.html#codestream_indices">codestream_indices</A> and 
<A HREF="jpx$anode__add_numlist.html#layer_indices">layer_indices</A> arrays, but additional codestreams and compositing
layers that are generated by an auto-replication procedure.
The auto-replication procedure depends on the JPX container
itself and is explained in the comments accompanying
<A HREF="jpx$anode__get$list_info.html">get_numlist_info</A>.
</P><P>
 A number list added using this function will be embedded
in a JPX container if you call the function with a
non-negative 
<A HREF="jpx$anode__add_numlist.html#container_id">container_id</A> or if the current node or any of its ancestors is
embedded in a JPX container. In any of these cases,
the compositing layer and codestream indices supplied
via 
<A HREF="jpx$anode__add_numlist.html#layer_indices">layer_indices</A> and 
<A HREF="jpx$anode__add_numlist.html#codestream_indices">codestream_indices</A> are required to satisfy the following constraints
(these constraints are checked and offending indices
will result in a 
<A HREF="kdu_error.html">kdu_error</A> message):
</P><UL><LI>
Each codestream index either refers to a top-level
codestream (see 
<A HREF="jpx$1ource__get$estreams.html">jpx_container_source::get_num_top_codestreams</A> or 
<A HREF="jpx$1arget__get$estreams.html">jpx_container_target::get_num_top_codestreams</A>) or else it must correspond to one of the codestreams
defined by the container. In the latter case, the codestream
index is NOT REQUIRED to be one of the container's
base codestreams (see 
<A HREF="jpx$1ource__get$1estreams.html">jpx_container_source::get_base_codestreams</A> or 
<A HREF="jpx$1arget__get$1estreams.html">jpx_container_target::get_base_codestreams</A>) BUT a non-base index will be automatically converted
to the corresponding base index.
</LI><LI>
Each compositing layer index either refers to a top-level
layer (see 
<A HREF="jpx$1ource__get$p_layers.html">jpx_container_source::get_num_top_layers</A> or 
<A HREF="jpx$1arget__get$p_layers.html">jpx_container_target::get_num_top_layers</A>) or else it must correspond to one of the compositing
layers defined by the container. In the latter case,
the layer index is NOT REQUIRED to be one of the container's
base compositing layers (see 
<A HREF="jpx$1ource__get$e_layers.html">jpx_container_source::get_base_layers</A> or 
<A HREF="jpx$1arget__get$e_layers.html">jpx_container_target::get_base_layers</A>) BUT a non-base index will be automatically converted
to the corresponding base index.
</LI></UL><P>
 Note that the above constraints apply even if 
<A HREF="jpx$anode__add_numlist.html#container_id">container_id</A> is negative, so long as the current node or any of
its ancestors is embedded in a JPX container. You can
always discover such embedding by calling 
<A HREF="jpx$anode__get$tainer_id.html">get_container_id</A>.
</P><P>
 The only way to introduce a new container-embedded
metanode is to call this present function, with a non-negative
<A HREF="jpx$anode__add_numlist.html#container_id">container_id</A> argument. In this case, the current object must be
the root of the metadata hierarchy &mdash; see 
<A HREF="jpx$nager__access_root.html">jpx_meta_manager::access_root</A>. This is because JPX containers (Compositing Layer
Extensions boxes) must appear at the top level of a
JPX file. If you want the auto-replication benefits
of container embedding without having to insert a meaningful
number list at the top level of the file, this can
be achieved by setting all other arguments of this
function to NULL/false. This declares a container-embedded
number list that has no associations of its own and
so will not actually result in the generation of a
number list box when writing a file, but ensures that
all descendant metanodes have the container-embedding
property.
</P>
</DIV>

<P ALIGN="CENTER"><HR></P><H2><A NAME="ReturnS">Return Value</A></H2><DIV CLASS="indented-text">
<P>
Reference to the newly created node.
</P>
</DIV>
<H2><A NAME="ArgS">Arguments</A></H2><DIV CLASS="indented-text">
<H4><A NAME="num_codestreams">num_codestreams</A> [<B>int</B>]</H4><DIV CLASS="indented-text">
<P>
Number of entries in the 
<A HREF="jpx$anode__add_numlist.html#codestream_indices">codestream_indices</A> array.
</P>
</DIV>
<H4><A NAME="codestream_indices">codestream_indices</A> [const&nbsp;<B>int</B>&nbsp;*]</H4><DIV CLASS="indented-text">
<P>
Array with 
<A HREF="jpx$anode__add_numlist.html#num_codestreams">num_codestreams</A> entries, holding the indices of the codestreams to
be referenced by the number list. This array is copied
internally.
</P><P>
 Note that these may be subject to the auto-replication
policy and constraints described in connection with
<A HREF="jpx$anode__get$list_info.html">get_numlist_info</A> and 
<B>get_numlist_cmap</B> if 
<A HREF="jpx$anode__add_numlist.html#container_id">container_id</A> is non-negative or the current node or any of its
ancestors is embedded within a JPX container.
</P>
</DIV>
<H4><A NAME="num_compositing_layers">num_compositing_layers</A> [<B>int</B>]</H4><DIV CLASS="indented-text">
<P>
Number of entries in the 
<A HREF="jpx$anode__add_numlist.html#layer_indices">layer_indices</A> array.
</P>
</DIV>
<H4><A NAME="layer_indices">layer_indices</A> [const&nbsp;<B>int</B>&nbsp;*]</H4><DIV CLASS="indented-text">
<P>
Array with 
<A HREF="jpx$anode__add_numlist.html#num_compositing_layers">num_compositing_layers</A> entries, holding the indices of the compositing layers
to be referenced by the number list. This array is
copied internally.
</P><P>
 Note that these may be subject to the auto-replication
policy and constraints described in connection with
<A HREF="jpx$anode__get$list_info.html">get_numlist_info</A> and 
<B>get_numlist_lmap</B> if 
<A HREF="jpx$anode__add_numlist.html#container_id">container_id</A> is non-negative or the current node or any of its
ancestors is embedded within a JPX container.
</P>
</DIV>
<H4><A NAME="applies_to_rendered_result">applies_to_rendered_result</A> [<B>bool</B>]</H4><DIV CLASS="indented-text">
<P>
True if the number list is to contain a reference to
the "rendered result". See 
<A HREF="jpx$anode__get$list_info.html">get_numlist_info</A> for a discussion of the meaning of the rendered result.
</P>
</DIV>
<H4><A NAME="container_id">container_id</A> [<B>int</B>]</H4><DIV CLASS="indented-text">
<P>
This argument may be non-negative only if the current
interface corresponds to the root of the metadata hierarchy
&mdash; obtained using 
<A HREF="jpx$nager__access_root.html">jpx_meta_manager::access_root</A>. Moreover, if non-negative, 
<A HREF="jpx$anode__add_numlist.html#container_id">container_id</A> must be the identifier of an existing JPX container,
(see 
<A HREF="jpx$1ource__get$ainer_id.html">jpx_container_source::get_container_id</A> or 
<A HREF="jpx$1arget__get$ainer_id.html">jpx_container_target::get_container_id</A>) and all compositing layer and codestream indices
supplied in this call must conform to the container-specific
constraints that are listed above.
</P>
</DIV>
</DIV>

<P ALIGN="CENTER"><HR></P><P ALIGN="RIGHT">|<A HREF="#ToP"> top </A>||<A HREF="#SynopsiS"> synopsis </A>||<A HREF="#ReturnS"> return value </A>||<A HREF="#ArgS"> arguments </A>||<A HREF="jpx$anode__cha$ge_parent.html"> prev </A>||<A HREF="jpx$anode__add_regions.html"> next </A>|</P>
</BODY>
</HTML>
