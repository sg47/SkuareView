<HTML>
<HEAD>
<TITLE> Kakadu Hyper-Doc (mj2_video_source::get_geometry) </TITLE>
<STYLE TYPE="text/css">
<!--
.indented-text { padding-left: 20pt; }
.function-text { padding-left: 80pt;
                 text-indent: -60pt; }
-->
</STYLE>
</HEAD>
<BODY TEXT="#000000" LINK="#0000ff" BGCOLOR="#B4DCB4">
<P ALIGN="RIGHT">|<A HREF="#SynopsiS"> synopsis </A>||<A HREF="#ArgS"> arguments </A>||<A HREF="mj2$ource__get$hics_mode__2.html"> prev </A>||<A HREF="mj2$ource__get$_geometry.html"> next </A>|</P>
<H1><A NAME="ToP">mj2_video_source::get_geometry</A></H1>
<DIR><DIR><H3><EM><U>Java:</U> Mj2_video_source.Get_geometry</EM></H3></DIR></DIR>
<P CLASS="function-text"><B>void</B> get_geometry(
<B>double</B>&nbsp;&amp;&nbsp;presentation_width,
<B>double</B>&nbsp;&amp;&nbsp;presentation_height,
<B>double</B>&nbsp;matrix[],
<B>bool</B>&nbsp;for_movie=true)</P>
<DIR><DIR><P CLASS="function-text"><EM><U>Java:</U> public native void Get_geometry(
double[]&nbsp;presentation_width,
double[]&nbsp;presentation_height,
double[]&nbsp;matrix,
boolean&nbsp;for_movie)</EM></P></DIR></DIR>
<P>[Declared in <A HREF="++++apps+c$essed_io+mj2+h.html">"../apps/compressed_io/mj2.h"</A>]</P><P><A HREF="mj2$ource.html">Go to class description.</A></P>

<P ALIGN="CENTER"><HR></P><H2><A NAME="SynopsiS">Synopsis</A></H2>
<DIV CLASS="indented-text">
<P>
This function provides information regarding the geometric
transformations which should be applied to the decompressed
imagery associated with this track. The 
<A HREF="mj2$ource__get_geometry.html#presentation_width">presentation_width</A> and 
<A HREF="mj2$ource__get_geometry.html#presentation_height">presentation_height</A> values represent conceptual dimensions to which the
frame samples are to be scaled, so as to produce a
presentation frame anchored at the origin. This presentation
frame is then subjected to affine transformation, using
parameters described via the 9-element 
<A HREF="mj2$ource__get_geometry.html#matrix">matrix</A>. The matrix is actually capable of representing perspective
transformations, but is restricted to affine operations
only by the Motion JPEG2000 standard. The 
<A HREF="mj2$ource__get_geometry.html#for_movie">for_movie</A> argument is used to select whether the geometric transformations
described by this function should be those described
in the track header alone (
<A HREF="mj2$ource__get_geometry.html#for_movie">for_movie</A>=false) or include also any additional transformations
specified for the whole movie (
<A HREF="mj2$ource__get_geometry.html#for_movie">for_movie</A>=true).
</P>
</DIV>

<P ALIGN="CENTER"><HR></P><H2><A NAME="ArgS">Arguments</A></H2><DIV CLASS="indented-text">
<H4><A NAME="presentation_width">presentation_width</A> [<B>double</B>&nbsp;&amp;]</H4><DIV CLASS="indented-text">
<P>
Used to return a conceptual presentation width to which
each frame is scaled prior to applying the 
<A HREF="mj2$ource__get_geometry.html#matrix">matrix</A>. We say that this is "conceptual", because the effect
of such scaling can always be folded into the matrix'
itself, so it is unlikely that a good rendering implementation
will actually scale first and then apply the affine
transform.
</P>
</DIV>
<H4><A NAME="presentation_height">presentation_height</A> [<B>double</B>&nbsp;&amp;]</H4><DIV CLASS="indented-text">
<P>
Used to return a conceptual presentation height, to
which each frame is scaled prior to applying the 
<A HREF="mj2$ource__get_geometry.html#matrix">matrix</A>. The same considerations apply as those discussed
for 
<A HREF="mj2$ource__get_geometry.html#presentation_width">presentation_width</A>.
</P>
</DIV>
<H4><A NAME="matrix">matrix[]</A> [<B>double</B>]</H4><DIV CLASS="indented-text">
<P>
3x3 matrix, stored in raster order as (a,c,x), (b,d,y),
(u,v,w), where each point (p,q) on the surface of the
presentation image is subjected to the following transformation:
</P><UL><LI>
(m,n,z)^t = M * (p,q,1)^t &mdash; here, "^t" denotes
transpose and M is the matrix whose rows are (a,c,x),
(b,d,y) and (u,v,w).
</LI></UL><P>
 The transformed point lies at x' = m/z and y'=n/z.
Although this matrix has the capability to represent
a general perspective transformation of the frame,
the Motion JPEG2000 standard insists that u=0, v=0
and w=1, so that z=1 and the transform is always affine.
</P>
</DIV>
<H4><A NAME="for_movie">for_movie</A> [<B>bool</B>]</H4><DIV CLASS="indented-text">
<P>
If false, the geomtric transformations described by
this function are resticted to those identified in
the track header. Otherwise, the geometric transformations
include any additional matrix transformation described
in the global movie header.
</P>
</DIV>
</DIV>

<P ALIGN="CENTER"><HR></P><P ALIGN="RIGHT">|<A HREF="#ToP"> top </A>||<A HREF="#SynopsiS"> synopsis </A>||<A HREF="#ArgS"> arguments </A>||<A HREF="mj2$ource__get$hics_mode__2.html"> prev </A>||<A HREF="mj2$ource__get$_geometry.html"> next </A>|</P>
</BODY>
</HTML>
