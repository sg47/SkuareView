<HTML>
<HEAD>
<TITLE> Kakadu Hyper-Doc (kdu_channel_mapping) </TITLE>
<STYLE TYPE="text/css">
<!--
.indented-text { padding-left: 20pt; }
-->
</STYLE>
</HEAD>
<BODY TEXT="#000000" LINK="#0000ff" BGCOLOR="#FFF491">
<P ALIGN="RIGHT">|<A HREF="#SynopsiS"> synopsis </A>||<A HREF="#FuncS"> functions </A>||<A HREF="#VarS"> variables </A>|</P>
<H1><A NAME="ToP">kdu_channel_mapping [struct]</A></H1>
<DIR><DIR><H3><U>Java:</U> class Kdu_channel_mapping</H3></DIR></DIR>

<P>[Declared in <A HREF="++++apps+s$decompressor+h.html">"../apps/support/kdu_region_decompressor.h"</A>]</P><P ALIGN="CENTER"><HR></P><H2><A NAME="SynopsiS">Synopsis</A></H2>
<DIV CLASS="indented-text">
<P>
This structure provides all information required to
express the relationship between code-stream image
components and the colour channels to be produced during
rendering. In the simplest case, each colour channel
(red, green and blue, or luminance) is directly assigned
to a single code-stream component. More generally,
component samples may need to be mapped through a pallete
lookup table, or a colour space transformation might
be required (e.g., the components or palette outputs
might describe the image in terms of a custom colour
space defined through an ICC profile).
</P><P>
 The purpose of this structure is to capture the reproduction
functions required for correct colour reproduction,
so that they can be passed to the 
<B>kdr_region_decompressor::start</B> function.
</P><P>
 This structure also serves to capture any information
concerning opacity (alpha) channels.
</P>
</DIV>

<P ALIGN="CENTER"><HR></P><H2><A NAME="FuncS">Public Functions</A></H2><DIV CLASS="indented-text">
<P><A HREF="kdu$pping__kdu$l_mapping.html">kdu_channel_mapping</A> {<U>Java:</U> Kdu_channel_mapping}
</P>
<P><A HREF="kdu$pping__~kd$l_mapping.html">~kdu_channel_mapping</A> {<U>Java:</U> Native_destroy}
</P>
<P><A HREF="kdu$pping__clear.html">clear</A> {<U>Java:</U> Clear}
</P>
<P><A HREF="kdu$pping__configure__1.html">configure</A> <EM>(4 forms)</EM> {<U>Java:</U> Configure}
</P>
<P><A HREF="kdu$pping__add$iguration.html">add_alpha_to_configuration</A> {<U>Java:</U> Add_alpha_to_configuration}
</P>
<P><A HREF="kdu$pping__get$_channels.html">get_num_channels</A> {<U>Java:</U> Get_num_channels}
</P>
<P><A HREF="kdu$pping__set$_channels.html">set_num_channels</A> {<U>Java:</U> Set_num_channels}
</P>
<P><A HREF="kdu$pping__get$1_channels.html">get_num_colour_channels</A> {<U>Java:</U> Get_num_colour_channels}
</P>
<P><A HREF="kdu$pping__get$component.html">get_source_component</A> {<U>Java:</U> Get_source_component}
</P>
<P><A HREF="kdu$pping__get$precision.html">get_default_rendering_precision</A> {<U>Java:</U> Get_default_rendering_precision}
</P>
<P><A HREF="kdu$pping__get$ng_signed.html">get_default_rendering_signed</A> {<U>Java:</U> Get_default_rendering_signed}
</P>
<P><A HREF="kdu$pping__get$converter.html">get_colour_converter</A> {<U>Java:</U> Get_colour_converter}
</P>
</DIV>
<H2><A NAME="VarS">Public Variables</A></H2><DIV CLASS="indented-text">
<H4><A NAME="num_channels">num_channels</A> [<B>int</B>] -- <U>Exported Property</U>&nbsp;{ <A HREF="kdu$pping__get$_channels.html">get</A>; <A HREF="kdu$pping__set$_channels.html">set</A>; }</H4><DIV CLASS="indented-text">
<P>
Total number of channels to render, including colour
channels and opacity channels. The 
<A HREF="kdu$pping__configure__1.html">configure</A> function will set this member to 1 or 3 if there is
no alpha channel, and 2 or 4 if there is an alpha channel,
depending on whether the source is monochrome or colour.
However, you may manually configure any number of channels
you like.
</P>
</DIV>
<H4><A NAME="num_colour_channels">num_colour_channels</A> [<B>int</B>] -- <U>Exported Property</U>&nbsp;{ <A HREF="kdu$pping__get$1_channels.html">get</A>; }</H4><DIV CLASS="indented-text">
<P>
Indicates the number of initial channels which are
used to describe pixel colour. This might be smaller
than 
<A HREF="kdu$pping.html#num_channels">num_channels</A> if, for example, opacity channels are to be rendered.
All channels are processed in the same way, except
in the event that colour space conversion is required.
</P>
</DIV>
<H4><A NAME="source_components">source_components</A> [<B>int</B>&nbsp;*]</H4><DIV CLASS="indented-text">
<P>
Array holding the indices of the codestream's output
image components which are used to form each of the
colour channels. There must be one entry for each channel,
although multiple channels may reference the same component.
Also, the mapping between source component samples
and channel sample values need not be direct.
</P>
</DIV>
<H4><A NAME="default_rendering_precision">default_rendering_precision</A> [<B>int</B>&nbsp;*]</H4><DIV CLASS="indented-text">
<P>
Indicates the default precision with which to represent
the sample values returned by the 
<A HREF="kdu$essor__process__1.html">kdu_region_decompressor::process</A> function in the event that it is invoked with a 
<B>precision_bits</B> argument of 0. A separate precision is provided for
each channel. The 
<A HREF="kdu$pping__configure__1.html">configure</A> functions set these entries up with the bit-depth
values available from the file format or code-stream
headers, as appropriate, but you can change them to
suit the needs of your application.
</P>
</DIV>
<H4><A NAME="default_rendering_signed">default_rendering_signed</A> [<B>bool</B>&nbsp;*]</H4><DIV CLASS="indented-text">
<P>
Similar to 
<A HREF="kdu$pping.html#default_rendering_precision">default_rendering_precision</A>, but used to identify whether or not each channel's
samples should be rendered as signed quantities when
the 
<A HREF="kdu$essor__process__1.html">kdu_region_decompressor::process</A> function is invoked with a zero-valued 
<B>precision_bits</B> argument. The 
<A HREF="kdu$pping__configure__1.html">configure</A> functions set these entries up with values recovered
from the file format or code-stream headers, as appropriate,
but you can change them to suit the needs of your application.
</P>
</DIV>
<H4><A NAME="palette_bits">palette_bits</A> [<B>int</B>]</H4><DIV CLASS="indented-text">
<P>
Number of index bits used with any palette lookup tables
found in the 
<A HREF="kdu$pping.html#palette">palette</A> array.
</P>
</DIV>
<H4><A NAME="palette">palette</A> [<A HREF ="kdu$ple16.html">kdu_sample16</A>&nbsp;**]</H4><DIV CLASS="indented-text">
<P>
Array with 
<A HREF="kdu$pping.html#num_channels">num_channels</A> entries, each of which is either NULL or else a pointer
to a lookup table with 2^{
<A HREF="kdu$pping.html#palette_bits">palette_bits</A>} entries.
</P><P>
 Note carefully that each lookup table must have a
unique buffer, even if all lookup tables hold identical
contents. The buffer must be allocated using 
<B>new</B>, since it will automatically be de-allocated using
<B>delete</B> when the present object is destroyed, or its 
<A HREF="kdu$pping__clear.html">clear</A> function is called.
</P><P>
 If 
<A HREF="kdu$pping.html#palette_bits">palette_bits</A> is non-zero and one or more entries in the 
<A HREF="kdu$pping.html#palette">palette</A> array are non-NULL, the corresponding colour channels
are recovered by scaling the relevant code-stream image
component samples (see 
<A HREF="kdu$pping.html#source_components">source_components</A>) to the range 0 through 2^{
<A HREF="kdu$pping.html#palette_bits">palette_bits</A>}-1 and applying them (as indices) to the relevant
lookup tables. If the code-stream image component has
an unsigned representation (this is common), the signed
samples recovered from 
<A HREF="kdu$1hesis.html">kdu_synthesis</A> or 
<A HREF="kdu$2coder.html">kdu_decoder</A> will be level adjusted to unsigned values before applying
them as indices to a palette lookup table.
</P><P>
 The entries in any palette lookup table are 16-bit
fixed point values, having KDU_FIX_POINT fraction bits
and representing normalized quantities having the nominal
range of -0.5 to +0.5.
</P>
</DIV>
<H4><A NAME="palette_bit_depth">palette_bit_depth</A> [<B>int</B>&nbsp;*]</H4><DIV CLASS="indented-text">
<P>
Array with 
<A HREF="kdu$pping.html#num_channels">num_channels</A> entries, each of which holds either 0 or the bit-depth
that was originally associated with the corresponding
<A HREF="kdu$pping.html#palette">palette</A> lookup table. For each channel index c, in the range
0 to 
<A HREF="kdu$pping.html#num_channels">num_channels</A>-1, if 
<A HREF="kdu$pping.html#palette">palette</A>[c] is NULL, the value of 
<A HREF="kdu$pping.html#palette_bit_depth">palette_bit_depth</A>[c] is ignored. For channels c, which do involve a
palette, the value of 
<A HREF="kdu$pping.html#palette_bit_depth">palette_bit_depth</A>[c] is the bit-depth B, associated with the palette
outputs, as originally expressed within a 
<A HREF="jp2$lette.html">jp2_palette</A> object. What this means is that palette values in
the range -2^{B-1} to (2^{B-1} - 1) have been scaled
by 2^{KDU_FIX_POINT - B} to obtain the values in the
corresponding 
<A HREF="kdu$pping.html#palette">palette</A> lookup table. The value of B is important only if
the palette values need to be stretched to precisely
fit a given range. This is because the scaled values
in the 
<A HREF="kdu$pping.html#palette">palette</A> lookup table occupy the range -2^{P-1} to (2^{P-1}
- 2^{KDU_FIX_POINT-B}) which is very weakly dependent
upon B. If 
<A HREF="kdu$pping.html#palette_bit_depth">palette_bit_depth</A>[c] is 0, B is taken to be infinite, meaning that no
stretching will ever be performed. Stretching is only
relevant if the 
<A HREF="kdu$essor__set$e_stretch.html">kdu_region_decompressor::set_white_stretch</A> function is passed a value larger than the original
palette bit-depth, or if the floating point version
of the 
<A HREF="kdu$essor__process__1.html">kdu_region_decompressor::process</A> function is to be employed.
</P>
</DIV>
<H4><A NAME="colour_converter">colour_converter</A> [<A HREF ="jp2$erter.html">jp2_colour_converter</A>]</H4><DIV CLASS="indented-text">
<P>
Initialized to an empty interface (
<A HREF="jp2$erter__exists.html">colour_converter.exists</A> returns false), you may call 
<A HREF="jp2$erter__init.html">colour_converter.init</A> to provide colour transformation capabilities. This
object is used by reference within 
<A HREF="kdu$essor.html">kdu_region_decompressor</A>, so you should not alter its state while still engaged
in region processing.
</P><P>
 This object is initialized by the 2'nd and 3'rd forms
of the 
<A HREF="kdu$pping__configure__1.html">configure</A> function to convert the JP2 or JPX colour representation
to sRGB, if possible.
</P>
</DIV>
</DIV>
<P ALIGN="CENTER"><HR></P>
<P ALIGN="RIGHT">|<A HREF="#ToP"> top </A>||<A HREF="#SynopsiS"> synopsis </A>||<A HREF="#FuncS"> functions </A>||<A HREF="#VarS"> variables </A>|</P>
</BODY>
</HTML>
