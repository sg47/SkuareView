<HTML>
<HEAD>
<TITLE> Kakadu Hyper-Doc (jpx_frame::get_old_ref) </TITLE>
<STYLE TYPE="text/css">
<!--
.indented-text { padding-left: 20pt; }
.function-text { padding-left: 80pt;
                 text-indent: -60pt; }
-->
</STYLE>
</HEAD>
<BODY TEXT="#000000" LINK="#0000ff" BGCOLOR="#B4DCB4">
<P ALIGN="RIGHT">|<A HREF="#SynopsiS"> synopsis </A>||<A HREF="#ReturnS"> return value </A>||<A HREF="#ArgS"> arguments </A>||<A HREF="jpx_frame__get$inal_iset.html"> prev </A>|</P>
<H1><A NAME="ToP">jpx_frame::get_old_ref</A></H1>
<DIR><DIR><H3><EM><U>Java:</U> Jpx_frame.Get_old_ref</EM></H3></DIR></DIR>
<P CLASS="function-text"><B>jx_frame</B>&nbsp;* get_old_ref(
<B>int</B>&nbsp;&amp;&nbsp;instruction_idx,
<B>int</B>&nbsp;&amp;&nbsp;instance_idx)</P>
<DIR><DIR><P CLASS="function-text"><EM><U>Java:</U> public native long Get_old_ref(
int[]&nbsp;instruction_idx,
int[]&nbsp;instance_idx)</EM></P></DIR></DIR>
<P>[Declared in <A HREF="++++apps+c$essed_io+jpx+h.html">"../apps/compressed_io/jpx.h"</A>]</P><P><A HREF="jpx_frame.html">Go to class description.</A></P>

<P ALIGN="CENTER"><HR></P><H2><A NAME="SynopsiS">Synopsis</A></H2>
<DIV CLASS="indented-text">
<P>
This function can be used to recover an old-style opaque
<B>jx_frame</B> reference and associated information that allows the
frame's compositing instructions to be queried via
the old-style 
<A HREF="jpx$ition__get$struction.html">jpx_composition::get_instruction</A> function.
</P><P>
 On entry, 
<B>instruction_offset</B> holds the index of one of the object's compositing
instructions &mdash; the number of these is returned
by 
<A HREF="jpx_frame__get_info.html">get_info</A>. The function returns the 
<B>jx_frame</B> reference to which this instruction belongs, along
with the repetition instance (
<A HREF="jpx_frame__get_old_ref.html#instance_idx">instance_idx</A>) associated with the frame. The function modifies
the value of 
<A HREF="jpx_frame__get_old_ref.html#instruction_idx">instruction_idx</A> so that it can be used with 
<A HREF="jpx$ition__get$struction.html">jpx_composition::get_instruction</A> to recover the same information that would be recovered
by the current object's 
<A HREF="jpx_frame__get$struction.html">get_instruction</A> function, when invoked with the original instruction
index.
</P><P>
 The above description is perhaps deceptively simple.
To use the 
<B>jx_frame</B> reference retained by this function, one needs first
to recover an appropriate 
<A HREF="jpx$ition.html">jpx_composition</A> interface by invoking the static 
<A HREF="jpx$ition__get$for_frame.html">jpx_composition::get_interface_for_frame</A> function. After invoking 
<A HREF="jpx$ition__get$struction.html">jpx_composition::get_instruction</A>, the returned relative compositing layer index needs
to be offset by 
<B>increment</B> * 
<A HREF="jpx_frame__get_old_ref.html#instance_idx">instance_idx</A>, where 
<B>increment</B> is the value returned by 
<A HREF="jpx$ition__get$rame_info.html">jpx_composition::get_frame_info</A>, and then passed to 
<A HREF="jpx$ition__map$layer_idx.html">jpx_composition::map_rel_layer_idx</A>. All of these operations are performed automatically
for you by the 
<A HREF="jpx_frame__get$struction.html">jpx_frame::get_instruction</A> function.
</P><P>
 It is worth mentioning that the returned 
<B>jx_frame</B> reference may depend upon the value of 
<A HREF="jpx_frame__get_old_ref.html#instruction_idx">instruction_idx</A> that is found on entry &mdash; this is because the
instruction indices provided to 
<A HREF="jpx_frame__get$struction.html">jpx_frame::get_instruction</A> index the complete set of compositing instructions
which contribute to a frame, including instructions
which may belong to previous frames that were marked
as persistent (unless the interface was created with
the 
<B>include_persistents</B> flag disabled).
</P><P>
 It is unlikely that an application will have cause
to invoke this function directly; however, it is used
internally by some Kakadu objects in order to offer
both old-style and new-style methods for accessing
compositing frames in a consistent manner.
</P>
</DIV>

<P ALIGN="CENTER"><HR></P><H2><A NAME="ReturnS">Return Value</A></H2><DIV CLASS="indented-text">
<P>
NULL if 
<A HREF="jpx_frame__get_old_ref.html#instruction_idx">instruction_idx</A> does not correspond to a valid instruction or the
current interface is empty.
</P>
</DIV>
<H2><A NAME="ArgS">Arguments</A></H2><DIV CLASS="indented-text">
<H4><A NAME="instruction_idx">instruction_idx</A> [<B>int</B>&nbsp;&amp;]</H4><DIV CLASS="indented-text">
</DIV>
<H4><A NAME="instance_idx">instance_idx</A> [<B>int</B>&nbsp;&amp;]</H4><DIV CLASS="indented-text">
</DIV>
</DIV>

<P ALIGN="CENTER"><HR></P><P ALIGN="RIGHT">|<A HREF="#ToP"> top </A>||<A HREF="#SynopsiS"> synopsis </A>||<A HREF="#ReturnS"> return value </A>||<A HREF="#ArgS"> arguments </A>||<A HREF="jpx_frame__get$inal_iset.html"> prev </A>|</P>
</BODY>
</HTML>
