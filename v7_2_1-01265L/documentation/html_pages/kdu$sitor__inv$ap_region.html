<HTML>
<HEAD>
<TITLE> Kakadu Hyper-Doc (kdu_region_compositor::inverse_map_region) </TITLE>
<STYLE TYPE="text/css">
<!--
.indented-text { padding-left: 20pt; }
.function-text { padding-left: 80pt;
                 text-indent: -60pt; }
-->
</STYLE>
</HEAD>
<BODY TEXT="#000000" LINK="#0000ff" BGCOLOR="#B4DCB4">
<P ALIGN="RIGHT">|<A HREF="#SynopsiS"> synopsis </A>||<A HREF="#ReturnS"> return value </A>||<A HREF="#ArgS"> arguments </A>||<A HREF="kdu$sitor__map_region.html"> prev </A>||<A HREF="kdu$sitor__fin$er_region.html"> next </A>|</P>
<H1><A NAME="ToP">kdu_region_compositor::inverse_map_region</A></H1>
<DIR><DIR><H3><EM><U>Java:</U> Kdu_region_compositor.Inverse_map_region</EM></H3></DIR></DIR>
<P CLASS="function-text"><A HREF ="kdu_dims.html">kdu_dims</A> inverse_map_region(
<A HREF ="kdu_dims.html">kdu_dims</A>&nbsp;region,
<A HREF ="kdu$m_ref.html">kdu_istream_ref</A>&nbsp;istream_ref)</P>
<DIR><DIR><P CLASS="function-text"><EM><U>Java:</U> public native Kdu_dims Inverse_map_region(
Kdu_dims&nbsp;region,
Kdu_istream_ref&nbsp;istream_ref)</EM></P></DIR></DIR>
<P>[Declared in <A HREF="++++apps+s$n_compositor+h.html">"../apps/support/kdu_region_compositor.h"</A>]</P><P><A HREF="kdu$sitor.html">Go to class description.</A></P>

<P ALIGN="CENTER"><HR></P><H2><A NAME="SynopsiS">Synopsis</A></H2>
<DIV CLASS="indented-text">
<P>
This function essentially performs the inverse mapping
of 
<A HREF="kdu$sitor__map_region.html">map_region</A>. The 
<A HREF="kdu$sitor__inv$ap_region.html#region">region</A> argument identifies a region on the identified codestream's
high resolution grid, except that the location of the
region is expressed relative to the upper left hand
corner of the codestream's image region on that grid
(usually, but not necessarily the same as the canvas
origin).
</P><P>
 The returned region idenifies the location and dimensions
of the original region, as it appears within the coordinate
system of the composited image, as used by 
<A HREF="kdu$sitor__set$r_surface.html">set_buffer_surface</A>.
</P><P>
 In the special case where 
<A HREF="kdu$sitor__inv$ap_region.html#istream_ref">istream_ref</A> is a "null" istream reference (i.e., 
<A HREF="kdu$m_ref__is_null.html">istream_ref.is_null</A> returns true), the 
<A HREF="kdu$sitor__inv$ap_region.html#region">region</A> is interpreted as a region on the current composited
surface, corresponding to a rendering scale of 1.0
and with the original geometry. In this case, the function
corrects only for rendering scale and geometry flags
(flips and transposition).
</P><P>
 Note that the interpretation of regions (particularly
for up-scaled compositions) was a little loose prior
to Kakadu version 6.4 and has since been fixed. The
returned region is now evaluated using 
<A HREF="kdu$essor__fin$over_dims.html">kdu_region_decompressor::find_render_cover_dims</A>, so as to find the tightest region on the composited
surface which covers all locations to which codestream
locations inside 
<A HREF="kdu$sitor__inv$ap_region.html#region">region</A> are mapped during the painting of metadata overlays.
</P>
</DIV>

<P ALIGN="CENTER"><HR></P><H2><A NAME="ReturnS">Return Value</A></H2><DIV CLASS="indented-text">
<P>
An empty region if 
<A HREF="kdu$sitor__inv$ap_region.html#istream_ref">istream_ref</A> is neither a "null" reference nor a reference to any
istream involved in the current composition. An empty
region is also returned if valid scale/orientation
information has not yet been installed via a successful
call to 
<A HREF="kdu$sitor__set_scale.html">set_scale</A>.
</P><P>
 Otherwise, the returned region is guaranteed to be
non-empty so long as 
<A HREF="kdu$sitor__inv$ap_region.html#region">region</A> was non-empty. This is because the machinery used
to map regions is 
<A HREF="kdu$essor__fin$over_dims.html">kdu_region_decompressor::find_render_cover_dims</A>.
</P><P>
 If the 
<A HREF="kdu$sitor__inv$ap_region.html#region">region</A> argument contains exactly one point, the returned
region is also guaranteed to contain exactly one point,
which is effectively that point which would be returned
via 
<A HREF="kdu$essor__fin$der_point.html">kdu_region_decompressor::find_render_point</A> (with appropriate adjustments to account for the composition
process). This can be a useful feature.
</P>
</DIV>
<H2><A NAME="ArgS">Arguments</A></H2><DIV CLASS="indented-text">
<H4><A NAME="region">region</A> [<A HREF ="kdu_dims.html">kdu_dims</A>]</H4><DIV CLASS="indented-text">
<P>
If empty, the region is interpreted as the relevant
codestream's entire image region (or the entire composition
if 
<A HREF="kdu$sitor__inv$ap_region.html#istream_ref">istream_ref</A> is a "null" instance of the 
<A HREF="kdu$m_ref.html">kdu_istream_ref</A> class.
</P>
</DIV>
<H4><A NAME="istream_ref">istream_ref</A> [<A HREF ="kdu$m_ref.html">kdu_istream_ref</A>]</H4><DIV CLASS="indented-text">
<P>
Identifies the istream for which you want the mapping
to be performed. In the special case where this is
a "null" istream reference, the mapping will be performed
at the composition (rather than codestream) level,
which corresponds to the kind of mapping you would
want to perform for a JPX ROI description box which
is not associated with any specific codestream.
</P>
</DIV>
</DIV>

<P ALIGN="CENTER"><HR></P><P ALIGN="RIGHT">|<A HREF="#ToP"> top </A>||<A HREF="#SynopsiS"> synopsis </A>||<A HREF="#ReturnS"> return value </A>||<A HREF="#ArgS"> arguments </A>||<A HREF="kdu$sitor__map_region.html"> prev </A>||<A HREF="kdu$sitor__fin$er_region.html"> next </A>|</P>
</BODY>
</HTML>
